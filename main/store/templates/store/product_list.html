{% extends "base.html" %}

{% block title %}
Главная страница
{% endblock %}

{% block body %}

<div class="container"><h1>Products</h1></div>




<form method="get">
    <select class="filterItem" name="category">
        <option value="">Категория</option>
        {% for category in categories %}
            <option value="{{ category.id }}" {% if category.id == category_id %}selected{% endif %}>{{ category.name }}</option>
        {% endfor %}
    </select>
    <select class="filterItem" name="color">
        <option value="">Цвет</option>
        {% for color in colors %}
            <option value="{{ color.id }}" {% if color.id == color_id %}selected{% endif %}>{{ color.name }}</option>
        {% endfor %}
    </select>
    <select class="filterItem" name="size">
        <option value="">Размер</option>
        {% for size in sizes %}
            <option value="{{ size.id }}" {% if size.id == size_id %}selected{% endif %}>{{ size.name }}</option>
        {% endfor %}
    </select>
    <button class="btn" type="submit">Применить фильтры</button>

    <a class="btn" href="?sort=name&order={{ next_order }}&category={{ category_id }}&color={{ color_id }}&size={{ size_id }}">
       По имени</a>
    <a class="btn" href="?sort=price&order={{ next_order }}&category={{ category_id }}&color={{ color_id }}&size={{ size_id }}">
        По цене</a>

    <a class="btn" href="{% url 'product_list' %}">
        Сбросить</a>
</form>


<div>
<ul class="items">
    {% for product in products %}
        <div class="item">
            {% if product.image %}

            <img class="productImage" src="{{ product.image.url }}" alt="{{ product.name }}">
            {% endif %}
            <li ><a class="productName" href="{% url 'product_detail' product.pk %}">{{ product.name }}</a></li>
            <li> {{ product.price }} </li>
            <form action="{% url 'add_to_favorites' product.id %}" method="post">
                {% csrf_token %}
                <button class="btn" type="submit">Добавить в избранное</button>
            </form>
            <form action="{% url 'add_to_cart' product.id %}" method="post">
                {% csrf_token %}
                <button class="btn add-to-cart" data-product-id="{{ product.id }}">Добавить в корзину</button>
            </form>
        </div>

    {% empty %}
        <li>No products available.</li>
    {% endfor %}
</ul>
</div>

{% endblock %}